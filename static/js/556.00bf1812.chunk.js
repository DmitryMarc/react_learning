"use strict";(self.webpackChunkreact_training_1=self.webpackChunkreact_training_1||[]).push([[556],{6556:function(s,e,t){t.r(e),t.d(e,{ProfileWrapper:function(){return T},default:function(){return z}});var r=t(5671),i=t(3144),n=t(136),o=t(8557),a=t(1413),u=t(2791),c=t(8687),l=t(6301),d="MyPosts_postsBlock__9cSVL",h="MyPosts_posts__TPsYA",f="Post_item__+5aXk",p=t(184),x=function(s){return(0,p.jsxs)("div",{className:f,children:[(0,p.jsx)("img",{src:"https://i.pinimg.com/736x/38/07/45/3807452de810352bca9c0587863ebece--avatar-film-nerd.jpg",alt:"avatar"}),s.message,(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{children:"like"})," ",s.likesCount]})]})},m=t(704),j=t(3079),v=t(5956),b=u.memo((function(s){console.log("RENDER YO");var e=s.posts.map((function(s){return(0,p.jsx)(x,{message:s.message,likesCount:s.likesCount},s.id)}));return(0,p.jsxs)("div",{className:d,children:[(0,p.jsx)("h3",{children:"My posts"}),(0,p.jsx)(g,{onSubmit:function(e){s.addPost(e.newPostText)}}),(0,p.jsx)("div",{className:h,children:e})]})})),g=(0,m.Z)({form:"ProfileAddNewPostForm"})((function(s){return(0,p.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,p.jsx)("div",{children:(0,v.Gr)("Post message","newPostText",[j.C],v.gx)}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{children:"Add post"})})]})})),P=b,k=(0,c.$j)((function(s){return{posts:s.profilePage.postsData}}),(function(s){return{addPost:function(e){s(l.Nw.addPostActionCreator(e))}}}))(P),I=t(9439),S=t(1269),_="ProfileInfo_descriptionBlock__Inoui",y="ProfileInfo_mainPhoto__C+0Qe",N="ProfileInfo_contact__gQ6n5",C=t(4353),Z=function(s){var e=(0,u.useState)(!1),t=(0,I.Z)(e,2),r=t[0],i=t[1],n=(0,u.useState)(s.status),o=(0,I.Z)(n,2),a=o[0],c=o[1];(0,u.useEffect)((function(){c(s.status)}),[s.status]);return(0,p.jsxs)("div",{children:[!r&&(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Status:"})," ",(0,p.jsx)("span",{onDoubleClick:function(){i(!0)},children:s.status||"-----"})]}),r&&(0,p.jsx)("div",{children:(0,p.jsx)("input",{onChange:function(s){c(s.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),s.updateStatus(a)},value:a})})]})},A=t(6079),w=(0,m.Z)({form:"edit-profile"})((function(s){var e=s.handleSubmit,t=s.profile,r=s.error;return(0,p.jsxs)("form",{onSubmit:e,children:[(0,p.jsx)("div",{children:(0,p.jsx)("button",{onClick:function(){},children:"save"})}),r&&(0,p.jsx)("div",{className:A.Z.formSummaryError,children:r}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Full name:"})," ",(0,v.Gr)("Full name","fullName",[],v.II)]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job:"}),(0,v.Gr)("","lookingForAJob",[],v.II,{type:"checkbox"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills:"}),(0,v.Gr)("My professional skills","lookingForAJobDescription",[],v.gx)]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me:"}),(0,v.Gr)("About me","aboutMe",[],v.gx)]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts:"})," ",Object.keys(t.contacts).map((function(s){return(0,p.jsxs)("div",{className:N,children:[(0,p.jsxs)("b",{children:[s,":"]})," ",(0,v.Gr)(s,"contacts."+s,[],v.II)]},s)}))]})]})})),M=function(s){var e=s.profile,t=s.isOwner,r=s.goToEditMode;return(0,p.jsxs)("div",{children:[t&&(0,p.jsx)("div",{children:(0,p.jsx)("button",{onClick:r,children:"edit"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Full name:"})," ",e.fullName]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job:"})," ",e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills:"})," ",e.lookingForAJobDescription]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me:"})," ",e.aboutMe]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts:"})," ",Object.keys(e.contacts).map((function(s){return(0,p.jsx)(U,{contactTitle:s,contactValue:e.contacts[s]})}))]})]})},U=function(s){var e=s.contactTitle,t=s.contactValue;return(0,p.jsxs)("div",{className:N,children:[(0,p.jsxs)("b",{children:[e,":"]})," ",t]})},F=function(s){var e=s.profile,t=s.status,r=s.updateStatus,i=s.isOwner,n=s.savePhoto,o=s.saveProfile,a=(0,u.useState)(!1),c=(0,I.Z)(a,2),l=c[0],d=c[1];if(!e)return(0,p.jsx)(S.Z,{});return(0,p.jsx)("div",{children:(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:_,children:[(0,p.jsx)("img",{src:e.photos.small||C,className:y}),i&&(0,p.jsx)("input",{type:"file",onChange:function(s){var e;null!==(e=s.target.files)&&void 0!==e&&e.length&&n(s.target.files[0])}}),l?(0,p.jsx)(w,{initialValues:e,profile:e,onSubmit:function(s){o(s).then((function(){d(!1)}))}}):(0,p.jsx)(M,{profile:e,isOwner:i,goToEditMode:function(){d(!0)}}),(0,p.jsx)(Z,{status:t,updateStatus:r})]})})})},O=function(s){return(0,p.jsxs)("div",{children:[(0,p.jsx)(F,{savePhoto:s.savePhoto,isOwner:s.isOwner,profile:s.profile,status:s.status,saveProfile:s.saveProfile,updateStatus:s.updateStatus}),(0,p.jsx)(k,{})]})},D=t(9271),E=t(7781),T=function(s){var e=(0,c.v9)((function(s){return s.profilePage.profile})),t=(0,c.v9)((function(s){return s.profilePage.status})),r=(0,c.v9)((function(s){return s.auth.userId})),i=(0,c.I0)(),n=function(){var e=+s.match.params.userId;e||(e=r)||s.history.push("/login"),e?(i((0,l.om)(e)),i((0,l.xD)(e))):console.error("Id should exists in URL params or in state ('authorizedUserId')")};return(0,u.useEffect)((function(){n()}),[]),(0,u.useEffect)((function(){s.match.params.userId!=s.match.params.userId&&n()}),[s]),(0,p.jsx)(O,(0,a.Z)((0,a.Z)({},s),{},{isOwner:+s.match.params.userId===r,profile:e,status:t,updateStatus:l.NN,savePhoto:l.m2}))},G=function(s){(0,n.Z)(t,s);var e=(0,o.Z)(t);function t(){return(0,r.Z)(this,t),e.apply(this,arguments)}return(0,i.Z)(t,[{key:"refreshProfile",value:function(){var s=+this.props.match.params.userId;s||(s=this.props.authorizedUserId)||this.props.history.push("/login"),s?(this.props.getUserProfile(s),this.props.getStatus(s)):console.error("Id should exists in URL params or in state ('authorizedUserId')")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s){this.props.match.params.userId!=s.match.params.userId&&this.refreshProfile()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return(0,p.jsx)(O,(0,a.Z)((0,a.Z)({},this.props),{},{isOwner:+this.props.match.params.userId===this.props.authorizedUserId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),t}(u.Component),z=(0,E.qC)((0,c.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth}}),{getUserProfile:l.om,getStatus:l.xD,updateStatus:l.NN,savePhoto:l.m2,saveProfile:l.Gi}),D.EN)(G)}}]);
//# sourceMappingURL=556.00bf1812.chunk.js.map