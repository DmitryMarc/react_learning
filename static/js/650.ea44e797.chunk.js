"use strict";(self.webpackChunkreact_training_1=self.webpackChunkreact_training_1||[]).push([[650],{3650:function(e,s,n){n.r(s),n.d(s,{Profile:function(){return le},default:function(){return ue}});var t=n(2791),i=n(8687),o=n(9271),r=n(6301),a=n(9439),c=n(5466),l=n(4353),u=n(4476),d="ProfileInfo_descriptionBlock__Inoui",f="ProfileInfo_photo__6k+u3",m="ProfileInfo_mainPhoto__C+0Qe",h="ProfileInfo_fullName__xBt98",x="ProfileInfo_informationItem__wFndW",j="ProfileInfo_contact__gQ6n5",p="ProfileInfo_contactTitle__vbpAq",v="ProfileInfo_uploadFile__-TPa1",_="ProfileInfo_uploadIconWrapper__9i430",N="ProfileInfo_uploadIcon__HheZ5",g="ProfileInfo_profileInformation__+RU8k",b="ProfileInfo_informationTitleItem__s4YFR",I="ProfileInfo_editProfileBtn__VL6-1",k="ProfileInfo_editProfileBtnWrapper__G-2LI",P=n(184),Z=function(e){var s=e.isOwner,n=(0,i.v9)(u.mW),o=(0,t.useState)(!1),c=(0,a.Z)(o,2),l=c[0],d=c[1],f=(0,t.useState)(n),m=(0,a.Z)(f,2),h=m[0],j=m[1],p=(0,i.I0)();(0,t.useEffect)((function(){j(n),d(!1)}),[n]);return(0,P.jsxs)("div",{children:[!l&&(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{className:x,children:"Status:"})," ",(0,P.jsx)("span",{onDoubleClick:function(){s&&d(!0)},children:n||"-----"})]}),l&&(0,P.jsx)("div",{children:(0,P.jsx)("input",{onChange:function(e){j(e.currentTarget.value)},autoFocus:!0,onBlur:function(e){e.currentTarget.value===n&&d(!1),p((0,r.NN)(h))},value:h})})]})},C=n(6079),w=n(704),y=n(5956),M="ProfileDataForm_contactsFormWrapper__dIXOv",F="ProfileDataForm_lookingForAJobCheckbox__mK8Vs",L=n(3649),A=(0,w.Z)({form:"edit-profile"})((function(e){var s=e.handleSubmit,n=e.profile,t=e.error,i=e.setIsContacts;return(0,P.jsxs)("form",{onSubmit:s,className:g,children:[t&&(0,P.jsx)("div",{className:C.Z.formSummaryError,children:t}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("b",{className:b,children:"Full name:"}),(0,y.Gr)("Full name","fullName",[],y.II)]}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("b",{className:b,children:"Looking for a job: "}),(0,P.jsx)("div",{className:F,children:(0,y.Gr)("","lookingForAJob",[],y.II,{type:"checkbox"})})]}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("b",{className:b,children:"My professional skills:"}),(0,y.Gr)("My professional skills","lookingForAJobDescription",[],y.gx)]}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("b",{className:b,children:"About me:"}),(0,y.Gr)("About me","aboutMe",[],y.gx)]}),(0,P.jsxs)("div",{className:M,children:[(0,P.jsx)("b",{className:b,children:"Contacts:"}),Object.keys(n.contacts).map((function(e){return(0,P.jsxs)("div",{className:j,children:[(0,P.jsxs)("b",{children:[e,":"]})," ",(0,y.Gr)(e,"contacts."+e,[],y.II)]},e)}))]}),(0,P.jsx)("div",{children:(0,P.jsx)(L.Z,{htmlType:"submit",onClick:function(){n.contacts&&i(!0)},style:{float:"right"},children:"Save"})})]})})),S=n(1413),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},O=n(4291),E=function(e,s){return t.createElement(O.Z,(0,S.Z)((0,S.Z)({},e),{},{ref:s,icon:T}))};E.displayName="UploadOutlined";var V=t.forwardRef(E),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},B=function(e,s){return t.createElement(O.Z,(0,S.Z)((0,S.Z)({},e),{},{ref:s,icon:H}))};B.displayName="EditOutlined";var z=t.forwardRef(B),D=n(2847),G=function(e){var s=e.profile,n=e.isOwner,r=e.goToEditMode,a=e.isContacts,c=e.setIsContacts,l=(0,i.I0)(),u=(0,o.UO)(),d=(0,o.k6)();(0,t.useEffect)((function(){return c(!1)}),[]);return(0,P.jsxs)("div",{className:g,children:[(0,P.jsx)("div",{className:h,children:(0,P.jsx)("h3",{children:s.fullName})}),n&&(0,P.jsxs)("span",{className:k,children:["edit profile ",(0,P.jsx)("button",{className:I,onClick:r,children:(0,P.jsx)(z,{})})]}),(0,P.jsx)(Z,{isOwner:n}),(0,P.jsx)("hr",{}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("b",{children:"Looking for a job:"})," ",s.lookingForAJob?"yes":"no"]}),s.lookingForAJob&&(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("b",{children:"My professional skills:"})," ",s.lookingForAJobDescription]}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("b",{children:"About me:"})," ",s.aboutMe,!s.aboutMe&&"-----"]}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("b",{children:"Contacts:"})," ",!a&&"-----",Object.keys(s.contacts).map((function(e){return(0,P.jsx)(W,{setIsContacts:c,contactTitle:e,contactValue:s.contacts[e]})}))]}),!n&&(0,P.jsx)("div",{className:x,children:(0,P.jsx)(L.Z,{onClick:function(){l((0,D.tw)(+u.userId)),d.push("/dialogs/".concat(+u.userId,"/messages")),l((0,D.CB)(+u.userId))},children:"Write message"})})]})},W=function(e){var s=e.contactTitle,n=e.contactValue,t=e.setIsContacts;return n?(t(!0),(0,P.jsxs)("div",{className:j,children:[(0,P.jsxs)("b",{className:p,children:[s,":"]})," ",n]})):null},J=function(e){var s=e.isOwner,n=(0,t.useState)(!1),o=(0,a.Z)(n,2),h=o[0],x=o[1],j=(0,i.v9)(u.tM),p=(0,t.useState)(!1),g=(0,a.Z)(p,2),b=g[0],I=g[1],k=(0,i.I0)();return(0,t.useEffect)((function(){I(!1)}),[j]),j?(0,P.jsx)("div",{children:(0,P.jsxs)("div",{className:d,children:[(0,P.jsxs)("div",{className:f,children:[(0,P.jsx)("img",{src:j.photos.small||l,className:m}),s&&(0,P.jsxs)("label",{className:_,children:[(0,P.jsx)("input",{name:"file",type:"file",className:v,onChange:function(e){var s;null!==(s=e.target.files)&&void 0!==s&&s.length&&k((0,r.m2)(e.target.files[0]))}}),(0,P.jsx)("span",{className:_,children:(0,P.jsx)(V,{className:N})})]})]}),b?(0,P.jsx)(A,{initialValues:j,profile:j,onSubmit:function(e){k((0,r.Gi)(e))},setIsContacts:x}):(0,P.jsx)(G,{profile:j,isOwner:s,goToEditMode:function(){I(!0)},isContacts:h,setIsContacts:x})]})}):(0,P.jsx)(c.Z,{})},R="MyPosts_postsBlock__9cSVL",U="MyPosts_posts__TPsYA",Q="Post_item__+5aXk",Y="Post_likesCounterWrapper__0OcPO",q="Post_likeIcon__bbq6T",X="Post_likedPost__YyT69",K=n(8686),$=n(9603),ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]},name:"like",theme:"outlined"},se=function(e,s){return t.createElement(O.Z,(0,S.Z)((0,S.Z)({},e),{},{ref:s,icon:ee}))};se.displayName="LikeOutlined";var ne=t.forwardRef(se),te=function(e){var s=e.id,n=e.message,t=e.likesCount,o=e.isLiked,a=e.userPhoto,c=(0,i.I0)();return(0,P.jsx)("div",{className:Q,children:(0,P.jsxs)(K.Z,{gutter:[0,6],children:[(0,P.jsx)($.Z,{span:24,children:(0,P.jsx)("img",{src:a,alt:"avatar"})}),(0,P.jsx)($.Z,{span:1}),(0,P.jsx)($.Z,{span:23,children:n}),(0,P.jsx)($.Z,{span:1}),(0,P.jsx)($.Z,{span:23,children:(0,P.jsxs)("div",{className:Y,children:[(0,P.jsx)(ne,{onClick:function(){c(o?r.Nw.clickLikeActionCreator(s,t-1,!1):r.Nw.clickLikeActionCreator(s,t+1,!0))},className:"".concat(q," ").concat(o&&X)})," ",t]})})]})})},ie=n(3079),oe=t.memo((function(){var e=(0,t.useState)(null),s=(0,a.Z)(e,2),n=s[0],o=s[1],l=(0,i.v9)(u.HH),d=(0,i.v9)(u.NF),f=(0,i.I0)();(0,t.useEffect)((function(){o(l)}),[l]);var m=d.map((function(e){return(0,P.jsx)(te,{id:e.id,isLiked:e.isLiked,userPhoto:n,message:e.message,likesCount:e.likesCount},e.id)}));return d?(0,P.jsxs)("div",{className:R,children:[(0,P.jsx)("h3",{children:"My posts"}),(0,P.jsx)(re,{onSubmit:function(e){f(r.Nw.addPostActionCreator(e.newPostText))}}),(0,P.jsx)("div",{className:U,children:m})]}):(0,P.jsx)(c.Z,{})})),re=(0,w.Z)({form:"ProfileAddNewPostForm"})((function(e){return(0,P.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,P.jsx)("div",{children:(0,y.Gr)("Post message","newPostText",[ie.C],y.gx)}),(0,P.jsx)("div",{children:(0,P.jsx)(L.Z,{htmlType:"submit",style:{float:"right"},children:"Save"})})]})})),ae=oe,ce=n(8595),le=function(e){var s=(0,i.v9)(ce.DQ),n=(0,i.I0)(),o=function(){var t=+e.match.params.userId;t||(t=s)||e.history.push("/login"),t?(n((0,r.om)(t)),n((0,r.xD)(t))):console.error("Id should exists in URL params or in state ('authorizedUserId')")};(0,t.useEffect)((function(){o()}),[]),(0,t.useEffect)((function(){o()}),[e.match.params.userId]);var a=+e.match.params.userId===s;return(0,P.jsxs)(K.Z,{gutter:[1,0],children:[(0,P.jsx)($.Z,{span:12,children:(0,P.jsx)(J,{isOwner:a})}),(0,P.jsx)($.Z,{span:12}),(0,P.jsx)($.Z,{span:8,children:a&&(0,P.jsx)(ae,{})})]})},ue=(0,o.EN)(le)},4476:function(e,s,n){n.d(s,{HH:function(){return i},NF:function(){return r},mW:function(){return o},tM:function(){return t}});var t=function(e){return e.profilePage.profile},i=function(e){var s;return null===(s=e.profilePage.profile)||void 0===s?void 0:s.photos.small},o=function(e){return e.profilePage.status},r=function(e){return e.profilePage.postsData}}}]);
//# sourceMappingURL=650.ea44e797.chunk.js.map